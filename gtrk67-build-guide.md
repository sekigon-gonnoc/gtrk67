## 同梱品

|名称|数|画像|
|-|-|-|
|メイン基板|1|![alt](img/parts-pcb.JPG)|
|トッププレート|1|![alt](img/parts-top.JPG)|
|ボトムプレート|1|![alt](img/parts-bottom.JPG)|
|BLE Micro Pro|1|![alt](img/parts-ble-micro.jpg)|
|電池ボックス|2||
|スライドスイッチ|1||
|スペーサー|4||
|ねじ(低頭M2)|4||
|ねじ(M2)|6||
|クッションテープ|1||
|**トラックボール部品**||
|トラックボールケース|1||
|トラックボールセンサー|1||
|ベアリング|3||
|ねじ(M1.4)|3||

## 別途必要な部品

|名称|数|補足|
|-|-|-|
|キースイッチ|67||
|キーキャップ|||
|コンスルー|2|12ピン（高さ2.5mm）|
|34mmトラックボール交換球|1||
|**任意**|||
|クッションゴム|8||

## 必要な工具

- はんだごて、はんで
- ニッパー
- ドライバー
- （やすり）

## 組立手順

### トラックボールケースにセンサーを差し込み、ベアリングをネジで固定する

* センサーの下縁がケースの下縁と揃うように奥まで差し込んでください
* センサー裏面の基板がケースと干渉する場合はケースを軽くやすり掛けして広げてください
* ベアリングは多少ガタつきますが、問題ありません。

![](img/asm-trackball.JPG)

### メイン基板のレール部分を切り離す

* 誤って親指部分を折らないように気を付けてください

![](img/asm-main-1.JPG)

### メイン基板・トッププレートの、トラックボール搭載側の親指部分を切り離す

* 向きを間違えないように注意してください。下記画像は左側にトラックボールを搭載する例です。

![](img/asm-main-2.JPG)

![](img/asm-top.JPG)

### ボトムプレートにクッションテープを張り付ける

* BLE Micro Proを下から支えるようにテープを張り付けてください

![](img/asm-bottom.JPG)

### メイン基板またはトッププレートにスタビライザーを取り付ける


### トッププレートにスペーサーをねじ止めする

* 低頭ねじでスペーサーをトッププレートにねじ止めしてください

### トッププレート・メイン基板にスイッチを差し込む

* キースイッチだけでなく、スライドスイッチも挟んでください
* ソケットが剥がれないように注意してください。裏から抑えながら差し込むことをおすすめします

![](img/asm-switch-2.JPG)

![](img/asm-switch-1.JPG)


### 電池ボックスの足を折り曲げて短く切る

* メイン基板に差し込めるように、電池ボックスの足を折り曲げます
* 2つのボックスでそれぞれ折り曲げる方向が異なります

![](img/asm-battery.JPG)

### 電池ボックス、スライドスイッチをはんだ付けする

* 電池ボックスがトッププレートにぴったりと付くようにしてください

![](img/asm-solder.JPG)

![](img/asm-solder-2.JPG)

![](img/asm-solder-3.JPG)

### メイン基板にBLE Micro Proをコンスルーで取り付ける

* コンスルーはUSBコネクタ側に寄せて差し込んでください
* はんだ付けは不要です

![](img/asm-bmp.JPG)

![](img/asm-mcu.JPG)

### トラックボールをコネクタに差し込む

* コネクタのフラップ(黒い部分)を上に持ち上げ、トラックボールのケーブルをしっかり奥まで差し込み、フラップを下げます 

![](img/asm-fpc-3.JPG)

![](img/asm-fpc.JPG)

### ボトムプレートを取り付け、ボトムプレートにトラックボールケースを取り付ける

![](img/asm-bottom-2.JPG)

### トラックボールケースにボールを入れる

* ボールをケースに押し込んでください

### キーキャップを取り付ける

![](img/asm-keycaps.JPG)

### Vialでキーマップを変更する

* ChromeまたはEdgeで[Vial](https://vial.rocks/)にアクセスし、Start VialボタンをクリックしてGTRK67に接続してください
    * 左手トラックボールで組み立てた場合はレイアウトを変更します
        ![](img/vial-layout.png)
* 日本語キーボード用の印字に合わせるには`Keyboard layout`から`Japanese`を選択します
    ![](img/vial-japanese.png)
* キーマップの設定の詳細についてはQMKやBLE Micro Proのドキュメントを参照してください

|機能|ラベル|タブ|
|-|-|-|
|左クリック|Mouse 1|App, Media and Mouse|
|右クリック|Mouse 2|App, Media and Mouse|
|中クリック|Mouse 3|App, Media and Mouse|
|無線接続に切り替え|SEL BLE|User|
|有線接続に切り替え|SEL USB|User|
|ペアリング済みデバイスに無線接続|ADV IDn|User|
|新しいデバイスとペアリング|ADV W/O L|User|
|英語キーボードを日本語OSで動作させるためのオーバーライドを設定する|UJ OVR|User|
|日本語キーボードを英語OSで動作させるためのオーバーライドを設定する|JU OVR|User|
|上記オーバーライドを無効化|D OVR|User|

### 有線接続で動作確認する

### (無線接続する場合)接続デバイスとペアリングする

* `ADV W/O L`に設定したキーを押す
* 接続したいデバイスの設定を開き、ペアリングを実行する
* すでに他のデバイスとペアリング済みの場合、それらのデバイスのBluetoothを無効化にしておく必要があります

## ファームウェアをビルドする

* ソースコード: [https://github.com/sekigon-gonnoc/vial-qmk/tree/dev/ble-micro-pro/keyboards/sekigon/gtrk67](https://github.com/sekigon-gonnoc/vial-qmk/tree/dev/ble-micro-pro/keyboards/sekigon/gtrk67)
* [書き込み手順](https://sekigon-gonnoc.github.io/BLE-Micro-Pro/#/build_firmware?id=%e7%94%9f%e6%88%90%e3%81%97%e3%81%9f%e3%83%95%e3%82%a1%e3%83%bc%e3%83%a0%e3%82%a6%e3%82%a7%e3%82%a2%e3%82%92%e6%9b%b8%e3%81%8d%e8%be%bc%e3%82%80)

## トラブルと対策

### トラックボールの動きがおかしい

* トラックボールのケーブルが、コネクタにしっかりささっているか確認してください。ケーブルについている癖によって、コネクタから抜けかけている場合があります。手で癖をつけ直して、コネクタに真っ直ぐささるようにしてください。

![](img/asm-fpc-2.JPG)

### 一部のキーが入力できない

* BLE Micro Proが抜けかけていないか確認してください